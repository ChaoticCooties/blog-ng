---
// Autoregressive diagram showing how LLMs generate tokens sequentially
---

<div class="autoregressive-diagram">
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 720 300">
    <!-- Arrow definition -->
    <defs>
      <marker id="arrow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
        <polygon points="0 0, 10 3, 0 6" fill="#6B6B6B"/>
      </marker>
    </defs>

    <!-- Title -->
    <text x="360" y="32" text-anchor="middle"
          font-family="'DM Sans', sans-serif"
          font-size="18" font-weight="600" fill="#1A1A1A">
      Autoregressive Language Models
    </text>
    <text x="360" y="50" text-anchor="middle"
          font-family="'DM Sans', sans-serif"
          font-size="13" fill="#6B6B6B">
      Each step: read the prefix, predict the next token, append, repeat.
    </text>

    <!-- STEP 1 LABEL -->
    <text x="60" y="80"
          font-family="'DM Sans', sans-serif"
          font-size="13" font-weight="600" fill="#6B6B6B">
      Step 1
    </text>

    <!-- STEP 1: prefix tokens -->
    <g id="step1">
      <!-- Tokens -->
      <rect x="60" y="90" width="80" height="38" rx="10"
            fill="#FAF8F5" stroke="#E8E5DF" stroke-width="2"/>
      <text x="100" y="114" text-anchor="middle"
            font-family="'DM Sans', sans-serif" font-size="14" fill="#1A1A1A">The</text>

      <rect x="150" y="90" width="80" height="38" rx="10"
            fill="#FAF8F5" stroke="#E8E5DF" stroke-width="2"/>
      <text x="190" y="114" text-anchor="middle"
            font-family="'DM Sans', sans-serif" font-size="14" fill="#1A1A1A">cat</text>

      <rect x="240" y="90" width="80" height="38" rx="10"
            fill="#FAF8F5" stroke="#E8E5DF" stroke-width="2"/>
      <text x="280" y="114" text-anchor="middle"
            font-family="'DM Sans', sans-serif" font-size="14" fill="#1A1A1A">sat</text>

      <!-- Arrow to model -->
      <line x1="320" y1="109" x2="360" y2="109"
            stroke="#6B6B6B" stroke-width="2.2" marker-end="url(#arrow)"/>

      <!-- Model block -->
      <rect x="360" y="82" width="140" height="54" rx="12"
            fill="#F05D23"/>
      <text x="430" y="114" text-anchor="middle"
            font-family="'DM Sans', sans-serif"
            font-size="15" font-weight="600" fill="#FAF8F5">
        Language Model
      </text>

      <!-- Arrow to predicted token -->
      <line x1="500" y1="109" x2="540" y2="109"
            stroke="#6B6B6B" stroke-width="2.2" marker-end="url(#arrow)"/>

      <!-- Predicted token -->
      <rect x="540" y="90" width="80" height="38" rx="10"
            fill="#FFF9F0" stroke="#F05D23" stroke-width="3"/>
      <text x="580" y="114" text-anchor="middle"
            font-family="'DM Sans', sans-serif"
            font-size="14" font-weight="600" fill="#F05D23">on</text>
    </g>

    <!-- Curved arrow: append prediction to prefix -->
    <path d="M 580 128
            C 580 155, 480 175, 340 175"
          fill="none" stroke="#D0D0D0" stroke-width="2" marker-end="url(#arrow)"/>
    <text x="445" y="190" text-anchor="middle"
          font-family="'DM Sans', sans-serif"
          font-size="11" fill="#9A9A9A" font-style="italic">
      Add predicted token to prefix
    </text>

    <!-- STEP 2 LABEL -->
    <text x="60" y="200"
          font-family="'DM Sans', sans-serif"
          font-size="13" font-weight="600" fill="#6B6B6B">
      Step 2
    </text>

    <!-- STEP 2: prefix + new token -->
    <g id="step2">
      <!-- Tokens including new one -->
      <rect x="60" y="210" width="80" height="38" rx="10"
            fill="#FAF8F5" stroke="#E8E5DF" stroke-width="2"/>
      <text x="100" y="234" text-anchor="middle"
            font-family="'DM Sans', sans-serif" font-size="14" fill="#1A1A1A">The</text>

      <rect x="150" y="210" width="80" height="38" rx="10"
            fill="#FAF8F5" stroke="#E8E5DF" stroke-width="2"/>
      <text x="190" y="234" text-anchor="middle"
            font-family="'DM Sans', sans-serif" font-size="14" fill="#1A1A1A">cat</text>

      <rect x="240" y="210" width="80" height="38" rx="10"
            fill="#FAF8F5" stroke="#E8E5DF" stroke-width="2"/>
      <text x="280" y="234" text-anchor="middle"
            font-family="'DM Sans', sans-serif" font-size="14" fill="#1A1A1A">sat</text>

      <rect x="330" y="210" width="80" height="38" rx="10"
            fill="#FFF9F0" stroke="#F05D23" stroke-width="2"/>
      <text x="370" y="234" text-anchor="middle"
            font-family="'DM Sans', sans-serif" font-size="14" fill="#F05D23">on</text>

      <!-- Arrow to model -->
      <line x1="410" y1="229" x2="450" y2="229"
            stroke="#6B6B6B" stroke-width="2.2" marker-end="url(#arrow)"/>

      <!-- Model block (same model, next step) -->
      <rect x="450" y="202" width="140" height="54" rx="12"
            fill="#F05D23" opacity="0.9"/>
      <text x="520" y="234" text-anchor="middle"
            font-family="'DM Sans', sans-serif"
            font-size="15" font-weight="600" fill="#FAF8F5">
        Language Model
      </text>

      <!-- (Optional) faint arrow hinting next token would follow -->
      <line x1="590" y1="229" x2="625" y2="229"
            stroke="#D0D0D0" stroke-width="2" stroke-dasharray="4 4" marker-end="url(#arrow)"/>
    </g>
  </svg>
</div>