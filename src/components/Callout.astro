---
interface Props {
  type?: 'info' | 'warning' | 'success' | 'error' | 'tip';
  title?: string;
}

const { type = 'info', title } = Astro.props;

const icons = {
  info: `<svg width="20" height="20" viewBox="0 0 20 20" fill="none"><circle cx="10" cy="10" r="8" stroke="currentColor" stroke-width="1.5"/><path d="M10 10V14M10 6V7" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/></svg>`,
  warning: `<svg width="20" height="20" viewBox="0 0 20 20" fill="none"><path d="M10 2L2 17H18L10 2Z" stroke="currentColor" stroke-width="1.5" stroke-linejoin="round"/><path d="M10 8V11M10 14V15" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/></svg>`,
  success: `<svg width="20" height="20" viewBox="0 0 20 20" fill="none"><circle cx="10" cy="10" r="8" stroke="currentColor" stroke-width="1.5"/><path d="M7 10L9 12L13 8" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>`,
  error: `<svg width="20" height="20" viewBox="0 0 20 20" fill="none"><circle cx="10" cy="10" r="8" stroke="currentColor" stroke-width="1.5"/><path d="M7 7L13 13M13 7L7 13" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/></svg>`,
  tip: `<svg width="20" height="20" viewBox="0 0 20 20" fill="none"><path d="M10 2C10 2 7 5 7 8C7 9.65685 8.34315 11 10 11C11.6569 11 13 9.65685 13 8C13 5 10 2 10 2Z" stroke="currentColor" stroke-width="1.5" stroke-linejoin="round"/><path d="M8 12V14C8 15.1046 8.89543 16 10 16C11.1046 16 12 15.1046 12 14V12" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/><path d="M7 18H13" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/></svg>`
};
---

<div class={`callout callout-${type}`}>
  <div class="callout-icon" set:html={icons[type]} />
  <div class="callout-content">
    {title && <div class="callout-title">{title}</div>}
    <div class="callout-body">
      <slot />
    </div>
  </div>
</div>

<style>
  .callout {
    display: flex;
    gap: 1rem;
    padding: 1.25rem 1.5rem;
    margin: 2rem 0;
    border-radius: 10px;
    border-left: 4px solid;
  }

  .callout-info {
    background: #EFF6FF;
    border-color: #3B82F6;
    color: #1E40AF;
  }

  .callout-warning {
    background: #FEF3C7;
    border-color: #F59E0B;
    color: #92400E;
  }

  .callout-success {
    background: #D1FAE5;
    border-color: #10B981;
    color: #065F46;
  }

  .callout-error {
    background: #FEE2E2;
    border-color: #EF4444;
    color: #991B1B;
  }

  .callout-tip {
    background: #F3E8FF;
    border-color: #A855F7;
    color: #6B21A8;
  }

  .callout-icon {
    flex-shrink: 0;
    margin-top: 0.125rem;
  }

  .callout-content {
    flex: 1;
  }

  .callout-title {
    font-weight: 600;
    font-size: 1rem;
    margin-bottom: 0.5rem;
  }

  .callout-body {
    font-size: 0.95rem;
    line-height: 1.6;
  }

  .callout-body :global(p) {
    margin: 0;
  }

  .callout-body :global(p + p) {
    margin-top: 0.75rem;
  }

  .callout-body :global(code) {
    background: rgba(0, 0, 0, 0.1);
    padding: 0.125rem 0.375rem;
    border-radius: 4px;
    font-size: 0.9em;
  }
</style>
